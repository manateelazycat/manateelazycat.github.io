I"<p>æ—¥å¸¸åœ¨Webå¼€å‘ä¸­, ä¸€èˆ¬éƒ½æ˜¯åœ¨Emacsæ•²å¥½ä»£ç ä¸­, æ‰“å¼€Chromeæµ‹è¯•, è°ƒè¯•çš„æ—¶å€™ç›´æ¥è°ƒç”¨ Chrome å†…å»ºçš„ DevTools/Console ä¸­å¿«é€Ÿçš„è°ƒè¯•å’Œå®šä½ JavaScript ä»£ç çš„é—®é¢˜.</p>

<p>ä¸€èˆ¬çš„éƒ½æ˜¯è¿™æ ·ç©çš„, åœ¨Chromeä¸­æŒ‰  Cmd + Option + I:
<img src="http://localhost:4000/pics/indium/indium-1.png" alt="Chrome DevTools" /></p>

<p>Chrome çš„å¼€å‘è€…å·¥å…·è™½ç„¶å¾ˆå¥½ç”¨, ä½†æ˜¯ä½œä¸ºä¸€ä¸ªèµ„æ·±çš„Emacså…š, ç‰¹åˆ«è®¨åŒåœ¨ Chrome Console ä¸­è¹©è„šçš„ç”¨æ–¹å‘é”®è°ƒæ•´JavaSctipt ä»£ç , å¦‚æœå¯ä»¥ç›´æ¥åœ¨Emacsä¸­è°ƒè¯• JavaScript ä»£ç æ”¹å¤šå¥½å•Š, å’ŒEmacsé«˜åº¦é›†æˆ, æƒ³æƒ³éƒ½æŒºç¾çš„.</p>

<p>è¿™å°±æ˜¯ä»Šå¤©ç»™å¤§å®¶ä»‹ç»çš„ <a href="https://indium.readthedocs.io/en/latest/installation.html">Indium</a>
<img src="http://localhost:4000/pics/indium/indium-2.png" alt="Chrome" />
<img src="http://localhost:4000/pics/indium/indium-3.png" alt="Indium REPL" /></p>

<p>å®‰è£…äº† Indium äº†ä»¥å, Emacs å¯ä»¥é€šè¿‡ Chrome çš„è°ƒè¯•åè®®, ç›´æ¥åœ¨Emacsä¸­, reload é¡µé¢ã€æ‰§è¡Œå’Œè¡¥å…¨JavaScriptä»£ç ç‰‡æ®µã€é€šè¿‡ inspector æŸ¥æ‰¾å…ƒç´ å’Œå±æ€§ã€é€šè¿‡æ–­ç‚¹æ¥è°ƒè¯• JavaScript ä»£ç , æ‰€æœ‰éƒ½åœ¨ Emacs ä¸­å®Œæˆ, å†ä¹Ÿä¸éœ€è¦é¢‘ç¹çš„åœ¨ Emacs å’Œ Chrome ä¸­åˆ‡æ¢.</p>

<h3 id="indium-çš„å®‰è£…æ–¹æ³•">Indium çš„å®‰è£…æ–¹æ³•</h3>

<h4 id="1-å®‰è£…-indium-æœåŠ¡å™¨">1. å®‰è£… indium æœåŠ¡å™¨</h4>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">-g</span> indium
</code></pre></div></div>

<h4 id="2-å®‰è£…-indium-emacs-å®¢æˆ·ç«¯">2. å®‰è£… indium Emacs å®¢æˆ·ç«¯</h4>
<p>ä» https://github.com/NicolasPetton/Indium ä¸‹è½½æºç å, åœ¨ ~/.emacs å†™å…¥:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;; å¼•ç”¨ indium åº“</span>
<span class="p">(</span><span class="nb">require</span> <span class="ss">'indium</span><span class="p">)</span>

<span class="c1">;; Macç³»ç»Ÿä¸­éœ€è¦ç”¨ exec-path-from-shell-initialize åŠ è½½ç¯å¢ƒå˜é‡, å¦åˆ™æ‰¾ä¸åˆ° indium server</span>
<span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">featurep</span> <span class="ss">'cocoa</span><span class="p">)</span>
  <span class="c1">;; Initialize environment from user's shell to make eshell know every PATH by other shell.</span>
  <span class="p">(</span><span class="nb">require</span> <span class="ss">'exec-path-from-shell</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">exec-path-from-shell-initialize</span><span class="p">))</span>

<span class="c1">;; JavaScript æ–‡ä»¶æ—¶æ‰“å¼€ indium-interaction-mode , å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œæ–­ç‚¹æ“ä½œ</span>
<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">'js2-mode-hook</span> <span class="nf">#'</span><span class="nv">indium-interaction-mode</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="3-é…ç½®-web-é¡¹ç›®çš„-indium-é…ç½®æ–‡ä»¶">3. é…ç½® Web é¡¹ç›®çš„ indium é…ç½®æ–‡ä»¶</h4>
<p>åœ¨ä½ çš„ Web é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå« .indium.json çš„æ–‡ä»¶, å†…å®¹å¦‚ä¸‹:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"configurations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
	</span><span class="p">{</span><span class="w">
	    </span><span class="s2">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Tower NG"</span><span class="p">,</span><span class="w">
	    </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"chrome"</span><span class="p">,</span><span class="w">
	    </span><span class="s2">"host"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.0.0"</span><span class="p">,</span><span class="w">
	    </span><span class="s2">"url"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://0.0.0.0:3000"</span><span class="p">,</span><span class="w">
	    </span><span class="s2">"port"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">9222</span><span class="w">
	</span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li>name: éšä¾¿èµ·</li>
  <li>type: Chrome è°ƒè¯•å°±å†™ â€œchromeâ€, NodeJS è°ƒè¯•è¯·å‚è€ƒ <a href="https://indium.readthedocs.io/en/latest/setup.html">Indium Setup</a></li>
  <li>host: 0.0.0.0 æœ¬åœ°è°ƒè¯•åœ°å€</li>
  <li>url: http://0.0.0.0:3000 æœ¬åœ°é¡¹ç›®çš„é¦–é¡µåœ°å€å’Œç«¯å£å·, ä½ è¦æ”¹æˆä½ è‡ªå·±é¡¹ç›®çš„è¦æ±‚</li>
  <li>port: 9222 æ³¨æ„è¿™ä¸ªæ˜¯ Chrome çš„è°ƒè¯•åè®®çš„ç«¯å£å·, å’Œä¸‹é¢ä»‹ç»çš„ Chrome å¯åŠ¨å‚æ•°æœ‰å…³, å’Œä½ çš„Webé¡¹ç›®æ— å…³</li>
</ul>

<h4 id="4-ç”¨è°ƒè¯•åè®®æ¥é‡æ–°å¯åŠ¨-chrome">4. ç”¨è°ƒè¯•åè®®æ¥é‡æ–°å¯åŠ¨ Chrome</h4>
<p>æ³¨æ„, Chrome å³ä½¿å…³é—­ä»¥å, ä¹Ÿä¼šä¿ç•™åå°è¿›ç¨‹å’Œç›¸å…³çš„ helper è¿›ç¨‹æ¥ä¿è¯ Chrome ä¸‹æ¬¡å¯åŠ¨å¦‚é£.
Chrome é»˜è®¤æ˜¯ä¸ç”¨è°ƒè¯•åè®®å¯åŠ¨çš„, æ‰€ä»¥é‡æ–°å¯åŠ¨ Chrome ä¹‹å‰, å¿…é¡»å…ˆè‡ªè¡Œ killall chrome çš„æ“ä½œ.</p>

<p>killall æ¸…ç†æ‰€æœ‰ Chrome è¿›ç¨‹ä»¥å, ä½¿ç”¨è°ƒè¯•åè®®å‚æ•°å¯åŠ¨ Chrome, Mac ç³»ç»Ÿä¸‹çš„å¯åŠ¨æ–¹æ³•å¦‚ä¸‹:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/Applications/Google<span class="se">\\</span> Chrome.app/Contents/MacOS/Google<span class="se">\\</span> Chrome <span class="nt">--remote-debugging-port</span><span class="o">=</span>9222 &amp;
</code></pre></div></div>

<p>æ³¨æ„ â€“remote-debugging-port åé¢çš„ç«¯å£å·å°±æ˜¯è°ƒè¯•åè®®ç”¨çš„ç«¯å£å·, éœ€è¦å’Œ .indium.json æ–‡ä»¶ä¸­çš„ port å‚æ•°ä¿æŒä¸€è‡´</p>

<p>PS. Mac/HammerSpoon åŒå­¦å¯ä»¥å‚è€ƒæˆ‘å†™çš„ <a href="https://github.com/manateelazycat/hammerspoon-config/blob/master/init.lua#L178">launchApp</a>å‡½æ•°æ™ºèƒ½çš„å¯åŠ¨ Google Chrome, ä¸ç”¨æ¯æ¬¡éƒ½ä»ç»ˆç«¯ä¸­æ‰‹åŠ¨æ•²ä¸€é•¿ä¸²å‘½ä»¤.</p>

<h4 id="5-è§è¯å¥‡è¿¹çš„æ—¶å€™åˆ°äº†">5. è§è¯å¥‡è¿¹çš„æ—¶å€™åˆ°äº†</h4>
<p>æ‰“å¼€EmacsåŠ è½½ indium å, æ‰“å¼€Webé¡¹ç›®ä¸­çš„ JavaScript æ–‡ä»¶.
æ‰§è¡Œ indium-connect å‘½ä»¤, ä¸€æ—¦è¿æ¥æˆåŠŸå, å°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç•Œé¢:
<img src="http://localhost:4000/pics/indium/indium-4.png" alt="Indium REPL" /></p>

<p>å°±è¯æ˜ indium å·²ç»æˆåŠŸå¯ç”¨äº†, ç°åœ¨å°±å¯ä»¥åœ¨ Emacs ä¸­è°ƒè¯•JavaScriptä»£ç äº†.
å› ä¸º Indium è¿™ä¸ªä¸œè¥¿å‘å¾ˆå¤š, è¿™ç¯‡æ–‡ä»¶æŠŠå„ç§å‘éƒ½è¸©äº†, åˆ†äº«å‡ºæ¥, ç¥å¤§å®¶ Happy hacking.</p>

<p>æ›´å¤šå…³äº Indium çš„ç©æ³•è¯·å‚è€ƒ<a href="https://indium.readthedocs.io/en/latest/index.html">Indiumæ‰‹å†Œ</a></p>
:ET