<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2020-05-04T19:27:23+08:00</updated><id>http://localhost:4000/feed.xml</id><entry><title type="html">最美人间烟火气</title><link href="http://localhost:4000/reading/2020/05/04/reading-12-rules.html" rel="alternate" type="text/html" title="最美人间烟火气" /><published>2020-05-04T00:00:00+08:00</published><updated>2020-05-04T00:00:00+08:00</updated><id>http://localhost:4000/reading/2020/05/04/reading-12-rules</id><content type="html" xml:base="http://localhost:4000/reading/2020/05/04/reading-12-rules.html">&lt;p&gt;去年在微博上看了乔丹·彼得森的一场TED演讲，当时被这个严肃到近乎真诚的人深深吸引，作为一位临床心理学家，他从心理学的实践出发，研究了大量现代人的心理问题，并对这些心理问题进行深入观察、感受和理解，拨开由痛苦和情绪彼此纠缠形成的迷雾，他最终把自己的感悟写成了一部巨著《人生十二法则》。&lt;/p&gt;

&lt;p&gt;第一次翻开《人生十二法则》的时候，看着目录真的很像一大本鸡汤，每章都有明确的鸡汤法则，但是当你真的沉下心去抚摸每段文字的时候，你会发现，这是一本从融合作者各学科知识和实践感悟的大百科全书，作者通过自己的亲身感悟，把现代人遇到的问题杂糅综合到各个章节中，然后通过对这些烦恼的现象和根源进行详细阐述，最终告诉你怎么正确的认识生活中的各种问题，并给出作者自己的启发性方案。&lt;/p&gt;

&lt;p&gt;作者本身也是一位硬核教授，为了生存，做过洗碗工、加油站员工、厨师、养蜂人、油田工人、铁路工人、特技飞行员，最终以心理学教授为职业。这么丰富人生经历的人写的书非常难以读懂，因为书里的每段话的信息量都非常大，既充满严谨简洁的学术用语，同时又面向普通人生活的点点滴滴。所以，我每天只能读一段话，然后去体会把玩这段话的寓意，就这样断断续续，我花了半年时间终于读完这本书。&lt;/p&gt;

&lt;p&gt;读的过程很难说出那种感觉是什么，不仅仅是高密集哲理，也不仅仅是时常读完后的感慨，感觉这本书就是一个压缩作者一生的百科全书，难有读其他书的畅快感，直到昨天和好朋友聊了几个小时，最终发现不是书的问题，而是我读书后面的目的，我是以一个”求学者”的身份去读这本书的，总是功利的吸纳这本书的每滴经验，可是每个章节并不像我们通常认为的是一个体系的，而是杂糅的，对，就是这种杂糅混乱而又充满哲理的感觉和我总是想通过一整套知识体系的读法产生了不小的冲突。当我和好朋友聊完天，合上这本书的最后一页后，终于明白，这本书讲的不就是 “人间烟火气” 吗？我们从小的教育洗脑总是希望通过教授一整套意识体系和知识体系，期望通过唯物的方式去理解这个世界，当我真的进入这个世界去接触形形色色的人和事后，发现我们理解和具备的知识和个人是多么的渺小，在这个世界上该遇到的坑和错误一个都少不了。当我合上书，以 “人间烟火气” 的方式去回顾这本书时，一切都明亮了，作者将的是人生，分享的是他自己生活这么多年后对人生的感悟，而不仅仅是功利的法则。&lt;/p&gt;

&lt;p&gt;希望看我博客的同学，有空的时候通读一遍这本书，我相信不论你是懵懂的少年还是沉沦的老年人，都会从书中得到很多。下面我分享一下我个人读这本书后的感悟。&lt;/p&gt;

&lt;h3 id=&quot;关于焦虑和幸福感&quot;&gt;关于焦虑和幸福感&lt;/h3&gt;
&lt;p&gt;在现在的社会中，大家总是在技能、金钱和社会地位上进行无穷无止的比较，是功利的攀比也好，还是在缺乏安全感下的学习进步也好，不断的跑，越跑越快，跑到筋疲力尽，终于有一天跑到中途弦断了，跑不动了，坐在地上望着远方不知在何方的目的地…&lt;/p&gt;

&lt;p&gt;此时，我们自己不但没有解决恐惧和焦虑，反而凭增了怨恨和迷茫，不知道未来应该怎么走。&lt;/p&gt;

&lt;p&gt;要避免自己陷入无穷的焦虑和恐惧，其实很容易，只是很少人做到：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;睡眠要好&lt;/strong&gt;，因为我们首先是人，而不是机器，人一旦陷入疲惫后，就没有足够的能量去清晰的理清楚复杂的现状，而大多数人拖着疲惫的身体不注重睡眠和休息，第一步就进入了自我折磨和自我否定的负面情绪中，而负面情绪的调节系统和维持有序的生物钟有关。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;清理自己的房间&lt;/strong&gt;，这里的房间不仅仅指的是物理房间的整洁，而是你心里乱麻般的思绪，此时的心绪乱如毛线团，不要一剪刀下去，那解决不了问题，我们需要在理心绪团的过程中，和自己真诚的对话，这一团如麻的心绪团中，哪些是自己认同的，哪些是外界强加给自己的，哪些是自己不认识的，没关系，一点一点的拆开每个令你困惑无比的心绪结，等你真的全部理清楚后，很多事情自然就迎刃而解了, 因为对抗复杂世界的唯一武器就是简单的内心，复杂的内心只会进入自以为是的状态，内心简单就会进入谦逊的状态，以不变应对存在的复杂性。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;多观察这个世界的美好&lt;/strong&gt;，这个世界有很多好的人和事情，也有非常多坏的人和事情，但是这个世界是客观的，它就像一切物理规律那样，矗立在那里，不受好和坏的影响，而我们有时候看得这个世界上的很多令我们恐惧和焦虑的事其实并不会让我们恐惧和焦虑，大多数坏的人和事情并不能真正的伤害到我们，真正伤害我们的往往是我们想改变坏的人和事情而改变不了的挫败感，既然我们改变不了别人，别人也伤害不了我们，我们应该做的是把精力到这个世界真正美好的细节中，去感受那些美好的事情，避免世界变成我们 “想象力虚构的恐怖世界”，你有多久没有看到花朵的色彩和花瓣的形状？你有多久没有看到清晨阳光撒到草地上，透过露珠带来的希望？你有多久没有看到湖边日落的晚霞？这些普普通通的美好每天都在等着你去体验，感受生活的美，现在就下楼去体验吧。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;看清楚未来，一件件去做&lt;/strong&gt;, 当你理清楚自己的房间，重新感受到这个世界的美好时，你会发现你拥有了两件最强大的东西，平静的内心和充满希望的喜悦，即使你现在在技能和金钱等身外之物上离自己的目标还有不少距离，但是你却拥有了最好的能力，就是你对自己的真诚、强大而平静的内心，拥有这两样，你将来做什么都会非常好的未来，接下来要做的事情非常非常简单，定一个小目标，一件一件的去探索和学习，这样既可以平衡对未知的恐惧，同时又能保持兴奋和投入的状态。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;每天留出一些时间应对危机，其他时间忘掉这些&lt;/strong&gt;, 即使我们做到上面说的所有要求，我们依然无法完全去掉恐惧和焦虑，因为这个世界复杂到超出每个人的认知和预料，所以恐惧和焦虑永远都没法消除，人生最差的状况就是 “让恐惧和焦虑填充我们的每分每秒，我们却无可奈何”。我们首先要有正确的认识，既然无法消除，我们每天只需要抽出很小一部分时间去应对恐惧和焦虑即可，剩下的时间就忘掉这些恐惧和焦虑去体验生活，因为人生本来就像在高速公路上驾驶一样，你无法消除旁边的危险，只能适时对危险保持关注，剩下的大部分时间应该放松肩膀专注车前方。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;用一句话来说，你需要先处理好自己的痛苦，再去担心他人。这样你才能够强化自己，承担起存在的重担，使生活重新焕发。&lt;/p&gt;

&lt;h3 id=&quot;关于生活的节奏&quot;&gt;关于生活的节奏&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;任何时候，不要在一次战斗中耗尽所有精力&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;原来年轻的时候，总是看准一个目标后，用尽全部精力去战斗，经常熬夜和不睡觉去解决问题，比如在创建深度操作系统团队时，最多有连续三周不眠不休的写代码，虽然在很多产品和项目中获得了战术的成功，但是从长远看，耗尽所有精力不是骄傲的胜利，而是牺牲其他重要的东西换来的，比如自己的健康和家庭的和睦，所以，当年再次进入正向奋斗的状态，切忌不要在任何一场战斗中耗费所有精力，保存实力，人生很漫长，慢慢奋斗，慢慢品人生。&lt;/p&gt;

&lt;h3 id=&quot;关于家庭矛盾&quot;&gt;关于家庭矛盾&lt;/h3&gt;
&lt;p&gt;人到中年，外面会面对复杂的世界，回家会面临家庭的责任，我花了十五年时间明白一个家庭和睦的道理就是 “不要和老婆大人讲道理，她就是道理” ， 这个是我实践的家庭和睦第一法则，今天我看完《人生十二法则》我明白了背后的原因：&lt;/p&gt;

&lt;p&gt;“女性讨论问题的目的便是为了更清晰地理解问题，她们需要有人聆听和提问，然后再着手去解决”&lt;/p&gt;

&lt;p&gt;也就是说，她们现有用情感去理解事情的经过，你首先要耐心的听她们讲完整个事情的经过，帮她们理顺思路以后，她们自然会赞同你的解决方案，她们需要的是过程中的沟通和理解，过程中良好的沟通远远比你直接告诉她 “什么是最好的结果” 重要的多。&lt;/p&gt;

&lt;p&gt;对和错对于家庭来说真的不重要，越争对错的家庭矛盾越大, 因为当你选择故步自封成为对的一方时，你的伴侣就会因为吵架输了而变成错的一方，这也无法为你带来和平，若这样的情况反复出现，婚姻就会破裂。如果要和平，你就需要寻找问题的真相，而不是试图成为对的人，这样，你才能打破自己的顽固。&lt;/p&gt;

&lt;p&gt;所以解决家庭问题的核心是，首先要作为一个安静的聆听探讨者，不论对于夫妻双方还是孩子，良好的聆听，通过聆听寻求共同的家庭和平，而不是争论谁对谁错，因为家庭组建的基石是包容对方的缺点、信任对方、共同面对生活。&lt;/p&gt;

&lt;h3 id=&quot;关于同情和怨恨&quot;&gt;关于同情和怨恨&lt;/h3&gt;
&lt;p&gt;以前在IT界有一个金句 “一个人离职要不是钱没给够，要不就是受憋屈了，要不就是两者皆有”， 所有离职的人根源就是这两个原因。&lt;/p&gt;

&lt;p&gt;今天在这本书看到类似的道理 “怨恨的产生只能有两个原因：一是自己被占便宜了，二是自己不愿意”。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;当一个人太迎合他人时会无法维护自己，他会假设别人和自己想法一致，所以会期待相应的回报，却不知道该如何确保这一点。在得不到回报时，他没法表达不满或者直接索取认可，而这种不平等会激活他性格的阴暗面，使他充满怨恨。&lt;/p&gt;

&lt;p&gt;有时候，我们在受到委屈的时候，我们会以为这是悲伤的泪水，其实很多时候这些都是因为怨恨引起的愤怒的泪水。&lt;/p&gt;

&lt;p&gt;所以，当我们在工作和生活中，遇到不公的待遇时，不要假设对方知道自己遭受到的不公，不要憋着不说，知道自己要什么，直白的提出自己想要的东西和解决方案，只有这样，我们才不会因为求而不得，最终产生怨恨伤害自己, 因为当你感受怨恨而渴求 “为什么会这样” 的时候，往往对方都不关心你，你也没有必要自我折磨。&lt;/p&gt;

&lt;p&gt;做自己，不要因为迎合别人丢失自我，不要因为怨恨进入受害者模式，伤害自己，不值得。&lt;/p&gt;

&lt;h3 id=&quot;很多鸡汤&quot;&gt;很多鸡汤&lt;/h3&gt;
&lt;p&gt;上面是我读这本书后感触最深的几个部分，书中依然有我认同的思想，只是我江郎才尽，没有足够的佐料继续熬下去，看着这么多鸡汤倒了可惜了，分享给大家吧，哈哈哈哈。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;不要低估视野和方向的力量，它们能够将看似不可逾越的障碍转变成宽阔通畅的道路。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;忠诚需要建立在公平和坦诚之上，友谊则应该是互惠的。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;但是也有人在经历了痛苦之后选择成为善良的人，这样的人在我看来就像超人。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;停止卑鄙的行事方式，停止令你感到懦弱和羞耻的言语。只说让你感到强大的话，只做令你为之骄傲的。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;真正想要改善世界的人，通常不会去试图改变别人，至少他们会先从改变自己。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;我应该怎样对待陌生人？邀请他来我家里，像对待兄弟一样对待他，这样他就真的有可能变成我的兄弟。这么做是在用信任将人最好的一面激发出来，用热情好客创造陌生人之间的美好联系。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;我应该怎样对待堕落的人？真诚而谨慎地伸出援手，但切记不要随他一起身陷泥潭，法则三讲的就是这一点。这个法则既能避免你陷入对牛弹琴的困境，又能阻止你用美德伪装自己的罪恶。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;用行动来体现存在的价值，避免自己因为存在的悲剧而变得痛苦和堕落。这就是法则一想表达的核心意义，即带着勇敢的信念主动迎接世界的不确定性。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;我应该怎样对待自己的不满足？想想那些一无所有的人，厘清自己的现状，努力学会感恩。你可以参考法则十二，也可以想想，也许阻碍你前进的不是机会的匮乏，而是你对已拥有的一切傲慢地视而不见。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;记住，给予比索取更有意义。这个世界是一个等待分享和交换的论坛，而不是一个等待洗劫的宝库。给予就是尽你所能让世界变得更好，当你这么做时，人们内心善的一面也会发出共鸣，大家会支持、模仿、回报和培养这样的行为，然后整个世界也会跟着变得越来越好。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;精力耗竭和心情不耐烦是不可避免的，人们总是有太多要做的事，而时间总是很有限。但是我们不需要孤军奋战，而且通过分工合作完成有意义的工作并分享功劳本来就是好事。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;我在下一个至暗时刻应该怎么做？专注在下一个正确的选择上。我们在法则十里强调过万事都有分崩离析的可能性，在混乱和不确定的环境里，唯一能够指引方向的，或许就是你通过追求理想和专注当下建设起来的人格。如果你没有完成建设，就无法应对危机，结果就只能听天由命。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;我应该如何使自己变得更强大？不要撒谎或做你鄙夷的事情。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;我应该如何使自己变得更高尚？只遵照你心灵的旨意行事。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;我应该如何面对最棘手的问题？将它们视为通向人生之道的大门。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;我应该如何帮助落魄的人？用正确的示范来鼓舞他，使他重新振作起来。&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;当众人皆醉我独醒时应该做什么？坚定勇敢地说出事实的真相。&lt;/p&gt;

&lt;h3 id=&quot;世间最美的是什么&quot;&gt;世间最美的是什么？&lt;/h3&gt;
&lt;p&gt;原来我年轻的时候，总是不满足，固执的不愿停下远行的脚步，望着高高的天走了长长的路，现在回首看，恍然悔悟，什么是世间最美好的事情？&lt;/p&gt;

&lt;p class=&quot;line-quote&quot;&gt;最美不过人间烟火气&lt;/p&gt;</content><author><name></name></author><summary type="html">去年在微博上看了乔丹·彼得森的一场TED演讲，当时被这个严肃到近乎真诚的人深深吸引，作为一位临床心理学家，他从心理学的实践出发，研究了大量现代人的心理问题，并对这些心理问题进行深入观察、感受和理解，拨开由痛苦和情绪彼此纠缠形成的迷雾，他最终把自己的感悟写成了一部巨著《人生十二法则》。</summary></entry><entry><title type="html">Gnome3的一些设置</title><link href="http://localhost:4000/linux/2020/04/14/switch-to-gnome.html" rel="alternate" type="text/html" title="Gnome3的一些设置" /><published>2020-04-14T00:00:00+08:00</published><updated>2020-04-14T00:00:00+08:00</updated><id>http://localhost:4000/linux/2020/04/14/switch-to-gnome</id><content type="html" xml:base="http://localhost:4000/linux/2020/04/14/switch-to-gnome.html">&lt;p&gt;最近EAF通过QWindow::setParent替换了X11 Reparent技术实现跨进程粘贴后，EAF现在已经可以支持Wayland。&lt;/p&gt;

&lt;p&gt;同时也把桌面环境从KDE切换至Gnome3，虽然Gnome3很多地方的交互设计还是一如既往的脑残，但是总体上还是简洁不少。&lt;/p&gt;

&lt;p&gt;Gnome3方面坑很多，各方面稍微调整了一下，方便下次重装系统参考。&lt;/p&gt;

&lt;h4 id=&quot;去掉一些快捷键&quot;&gt;去掉一些快捷键&lt;/h4&gt;
&lt;p&gt;我主要用Emacs和EAF，Chrome浏览器都不用，所以Gnome3很多内置快捷键会和EAF冲突, 而且这些快捷键无法通过Gnome3的设置面板中定制，需要 dconf-editor 来解决。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;安装 dconf-editor&lt;/li&gt;
  &lt;li&gt;根据目录 org-&amp;gt;gnome-&amp;gt;shell-&amp;gt;keybindings 打开内置按键设置界面&lt;/li&gt;
  &lt;li&gt;修改按键值为 [], 去掉内置快捷键占用&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;顺便图槽一下Gnome3的返回上级的交互设计，一个返回按钮和Backspace按键可以搞定的事情，非要通过弹出单选菜单的方式进行返回，真是脑残的设计。&lt;/p&gt;

&lt;h4 id=&quot;输入法配置&quot;&gt;输入法配置&lt;/h4&gt;

&lt;p&gt;Fcitx 没法直接在Wayland上运行，首先需要在文件 /etc/environment 中写入配置:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;GTK_IM_MODULE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;fcitx
&lt;span class=&quot;nv&quot;&gt;QT_IM_MODULE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;fcitx
&lt;span class=&quot;nv&quot;&gt;XMODIFIERS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;@im&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;fcitx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;然后通过命令
&lt;code class=&quot;highlighter-rouge&quot;&gt;gsettings set org.gnome.settings-daemon.plugins.xsettings overrides &quot;{'Gtk/IMModule':&amp;lt;'fcitx'&amp;gt;}&quot;&lt;/code&gt;
来设置Fcitx为输入法引擎&lt;/p&gt;

&lt;h4 id=&quot;gnome-shell插件&quot;&gt;Gnome Shell插件&lt;/h4&gt;

&lt;p&gt;默认安装了几个插件来定制Gnome Shell：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Hide Top Bar: 默认隐藏顶部栏&lt;/li&gt;
  &lt;li&gt;NoAnnoyance: 避免弹出 “窗口已经准备好” 的无聊通知&lt;/li&gt;
  &lt;li&gt;TopIcons Plus: 把托盘区域放到顶部面板中&lt;/li&gt;
  &lt;li&gt;User Themes: 可以加载第三方主题&lt;/li&gt;
  &lt;li&gt;Walkpaper：每个工作区不同的桌面壁纸，Gnome3本身没有这种设计支持，通过切换工作区换壁纸的方式来实现&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Gnome3默认分组的Alt + Tab设计也是脑残至极，好的是，现在可以直接在Gnome3设置面板通过设置 “窗口切换” 命令来回归传统的Alt + Tab切换功能。&lt;/p&gt;

&lt;h4 id=&quot;gnome-shell主题&quot;&gt;Gnome Shell主题&lt;/h4&gt;

&lt;p&gt;主题找了一下 Flat-Remix 主题，解压到 ~/.themes 目录下后，通过下面命令来设置主题&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;gsettings set org.gnome.shell.extensions.user-theme name &quot;Flat-Remix-Dark-fullPanel&quot;&lt;/code&gt;&lt;/p&gt;

&lt;h4 id=&quot;快速切换应用&quot;&gt;快速切换应用&lt;/h4&gt;

&lt;p&gt;我在&lt;a href=&quot;https://manateelazycat.github.io/linux/2019/09/13/open-or-raise.html&quot;&gt;Linux下实现打开或切换应用的功能&lt;/a&gt;文章中写了怎么快速切换应用，原理是一样的，只不过 Gnome3 的快捷键设置需要在所有命令增加 bash -c 的参数才能生效。&lt;/p&gt;

&lt;p&gt;That’s all!&lt;/p&gt;</content><author><name></name></author><summary type="html">最近EAF通过QWindow::setParent替换了X11 Reparent技术实现跨进程粘贴后，EAF现在已经可以支持Wayland。</summary></entry><entry><title type="html">快速拷贝网页中的代码片段</title><link href="http://localhost:4000/emacs/eaf/2020/04/08/eaf-copy-code.html" rel="alternate" type="text/html" title="快速拷贝网页中的代码片段" /><published>2020-04-08T00:00:00+08:00</published><updated>2020-04-08T00:00:00+08:00</updated><id>http://localhost:4000/emacs/eaf/2020/04/08/eaf-copy-code</id><content type="html" xml:base="http://localhost:4000/emacs/eaf/2020/04/08/eaf-copy-code.html">&lt;p&gt;我们平常在研究技术的时候，经常需要复制网上的代码做实验。遇到代码特别多的时候，需要用鼠标上下拖动来拷贝代码，而且经常容易拷贝出错，非常影响效率。&lt;/p&gt;

&lt;p&gt;今天写了一个&lt;a href=&quot;https://github.com/manateelazycat/emacs-application-framework/commit/018ec8bbadbf8bf3a8ae607fe092c89863cc8302&quot;&gt;补丁&lt;/a&gt; ， 可以做如下操作来快速拷贝网页中的代码片段：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;用EAF浏览器打开有代码片段的网页&lt;/li&gt;
  &lt;li&gt;按 C 键调用 insert_or_copy_code 命令，会在网页中搜索所有代码片段的地方，并高亮索引标签，类似Vimium的效果&lt;/li&gt;
  &lt;li&gt;键入相应的索引标签，即可快速拷贝代码标签到系统剪切板&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/pics/eaf-copy-code/eaf-copy-code.gif&quot; alt=&quot;EAF Copy Code&quot; /&gt;&lt;/p&gt;

&lt;p&gt;是不是效率非常高？;)&lt;/p&gt;</content><author><name></name></author><summary type="html">我们平常在研究技术的时候，经常需要复制网上的代码做实验。遇到代码特别多的时候，需要用鼠标上下拖动来拷贝代码，而且经常容易拷贝出错，非常影响效率。</summary></entry><entry><title type="html">解决KDE下FFmpeg录制视频屏幕闪烁的问题</title><link href="http://localhost:4000/linux/2020/04/05/record-flash.html" rel="alternate" type="text/html" title="解决KDE下FFmpeg录制视频屏幕闪烁的问题" /><published>2020-04-05T00:00:00+08:00</published><updated>2020-04-05T00:00:00+08:00</updated><id>http://localhost:4000/linux/2020/04/05/record-flash</id><content type="html" xml:base="http://localhost:4000/linux/2020/04/05/record-flash.html">&lt;p&gt;KDE下，我使用我写的深度录屏录在制程序的时候，发现录制出来的视频一直有闪烁问题，最开始还以为是我代码哪里写错了。&lt;/p&gt;

&lt;p&gt;今天搜索了一下，原来是KDE自己的锅，按照下面的方式设置一下就可以解决这个问题：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;打开KDE系统设置&lt;/li&gt;
  &lt;li&gt;点击 “显示和监控”&lt;/li&gt;
  &lt;li&gt;点击 “混合器”&lt;/li&gt;
  &lt;li&gt;找到 “避免撕裂（垂直同步）” 选项，从下拉菜单中选择 “从不”&lt;/li&gt;
  &lt;li&gt;保存&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;搞定，哪天有空了，录制一下EAF的使用视频。&lt;/p&gt;</content><author><name></name></author><summary type="html">KDE下，我使用我写的深度录屏录在制程序的时候，发现录制出来的视频一直有闪烁问题，最开始还以为是我代码哪里写错了。</summary></entry><entry><title type="html">Org-Mode 表格对齐设置</title><link href="http://localhost:4000/emacs/2020/04/02/org-font.html" rel="alternate" type="text/html" title="Org-Mode 表格对齐设置" /><published>2020-04-02T00:00:00+08:00</published><updated>2020-04-02T00:00:00+08:00</updated><id>http://localhost:4000/emacs/2020/04/02/org-font</id><content type="html" xml:base="http://localhost:4000/emacs/2020/04/02/org-font.html">&lt;h3 id=&quot;org-mode表格对齐&quot;&gt;Org-Mode表格对齐&lt;/h3&gt;
&lt;p&gt;Emacs的Org-Mode表格功能是大杀器，但对于中文用户来说，比较不爽的是因为中英字体不等宽导致Org-Mode表格无法对齐显示。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/tumashu/cnfonts&quot;&gt;cnfonts&lt;/a&gt;是针对这种问题的一种解决方案，通过找到匹配的中英文字体搭配来解决Org-Mode表格不对齐的问题，但是这种方法有一个最显著的副作用是，为了让Org-Mode表格对齐，会造成默认字体的英文字符太窄了，影响编码中字符的识别。虽然cnfonts也可以单独配置Org-Mode的字体，但是折腾也比较复杂。&lt;/p&gt;

&lt;h3 id=&quot;新的方法&quot;&gt;新的方法&lt;/h3&gt;
&lt;p&gt;其实更简单的做法是，利用更纱黑体这个字体来解决表格对齐的问题，因为更纱黑体字体通过融合现有字体实现中文字符的宽度刚好是英文字符宽度的两倍，以此来解决表格对齐的问题。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;首先通过命令 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo pacman -S ttf-sarasa-gothic wqy-microhei&lt;/code&gt; 安装好字体&lt;/li&gt;
  &lt;li&gt;然后把下面的配置放入 ~/.emacs 中即可&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-elisp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;emacs-font-size&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;emacs-font-name&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;WenQuanYi Micro Hei Mono&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;set-frame-font&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;%s-%s&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;emacs-font-name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;emacs-font-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;set-fontset-font&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;frame-parameter&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'font&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'unicode&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;emacs-font-name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;with-eval-after-load&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'org&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;defun&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;org-buffer-face-mode-variable&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;interactive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;make-face&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'width-font-face&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;set-face-attribute&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'width-font-face&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:font&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;等距更纱黑体 SC 15&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;buffer-face-mode-face&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'width-font-face&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;buffer-face-mode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;add-hook&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'org-mode-hook&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'org-buffer-face-mode-variable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;上面配置的意思是，默认Emacs使用文泉驿字体，Org-Mode使用更纱黑体字体，这样既可以解决Org-Mode表格对齐问题，又避免对Emacs其他模式产生影响。&lt;/p&gt;</content><author><name></name></author><summary type="html">Org-Mode表格对齐 Emacs的Org-Mode表格功能是大杀器，但对于中文用户来说，比较不爽的是因为中英字体不等宽导致Org-Mode表格无法对齐显示。</summary></entry><entry><title type="html">高效创作 Mindmap -&amp;gt; Org-Mode -&amp;gt; Word</title><link href="http://localhost:4000/linux/emacs/2020/04/01/org-to-docx.html" rel="alternate" type="text/html" title="高效创作 Mindmap -&gt; Org-Mode -&gt; Word" /><published>2020-04-01T00:00:00+08:00</published><updated>2020-04-01T00:00:00+08:00</updated><id>http://localhost:4000/linux/emacs/2020/04/01/org-to-docx</id><content type="html" xml:base="http://localhost:4000/linux/emacs/2020/04/01/org-to-docx.html">&lt;p&gt;作为Emacser，最享受在Emacs高效的处理文字，特别是在Emacs中编辑Markdown和Org文件，完全就是一种行云流水的感觉。
但是我们无法让所有的朋友和同事都使用Emacs，特别是有时候要发送公司文件给客户，客户一般都用Word。&lt;/p&gt;

&lt;p&gt;今天就介绍一种在Emacs中编写Org-Mode文件，然后通过Pandoc这个工具导出成Word文档的方法。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;首先创建一个 test.org 文件，第一行加入Org格式的标题字符串 &lt;code class=&quot;highlighter-rouge&quot;&gt;#+TITLE: 文档标题&lt;/code&gt;, 然后按照Org-Mode格式写文件内容&lt;/li&gt;
  &lt;li&gt;执行命令: &lt;code class=&quot;highlighter-rouge&quot;&gt;pandoc test.org -o test.docx --reference-doc=template.docx&lt;/code&gt; 生成Word文档&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;template.docx 模板文件包含了各种样式细节，它会指导Pandoc按照模板文件相同的样式来转换Word文档，测试时可以下载我的&lt;a href=&quot;https://github.com/manateelazycat/lazycat-emacs/blob/master/site-lisp/template/template.docx&quot;&gt;template.docx&lt;/a&gt;文件。&lt;/p&gt;

&lt;h3 id=&quot;为什么不直接在office中编辑&quot;&gt;为什么不直接在Office中编辑？&lt;/h3&gt;
&lt;p&gt;内容用Org创作，再转换成Word文档，这样做的好处是：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;文本操作效率高：可以利用Emacs强大的编辑命令快速编辑文件内容，而不是在Word中笨拙的操作光标&lt;/li&gt;
  &lt;li&gt;利用Emacs生态：Emacs有很多插件，纯文本的方式非常适合Emacs快速进行搜索和替换等操作&lt;/li&gt;
  &lt;li&gt;利用Org生态：比如切换缩进、按照章节移动、快速修复错误序号等问题都可以通过Org生态工具快速完成，而Word光选择一个大型的段落都要操作好久&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;生成模板文件&quot;&gt;生成模板文件&lt;/h3&gt;
&lt;p&gt;上面的命令中提到控制Word样式的模板文件，其实最简单创建模板的方法是:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;先用命令 &lt;code class=&quot;highlighter-rouge&quot;&gt;pandoc test.org -o template.docx&lt;/code&gt; 生成一个带Pandoc默认样式的Word文档&lt;/li&gt;
  &lt;li&gt;用Office软件打开 template.docx 文件，修改样式成你喜欢的模样&lt;/li&gt;
  &lt;li&gt;保存 template.docx 文件即可&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;emacs中操作&quot;&gt;Emacs中操作&lt;/h3&gt;

&lt;p&gt;Emacs用户可以用我下面的Elisp函数来实现一键自动转换的功能：&lt;/p&gt;

&lt;div class=&quot;language-elisp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;defun&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;org-export-docx&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;interactive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;docx-file&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;concat&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;file-name-sans-extension&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;buffer-file-name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;.docx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
           &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;template-file&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/path/template.docx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;shell-command&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;pandoc %s -o %s --reference-doc=%s&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;buffer-file-name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;docx-file&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;template-file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Convert finish: %s&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;docx-file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;注意，需要替换上面代码中的 &lt;code class=&quot;highlighter-rouge&quot;&gt;/path/template.docx&lt;/code&gt; 路径需要替换成你生成模板文件的真实路径。&lt;/p&gt;

&lt;h3 id=&quot;高效创作&quot;&gt;高效创作&lt;/h3&gt;
&lt;p&gt;我平常写文档的实践步骤是&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;理清思路：用EAF思维导图工具做大纲&lt;/li&gt;
  &lt;li&gt;填充内容：EAF思维导图导出Org格式大纲后，填充内容&lt;/li&gt;
  &lt;li&gt;转换格式：Org内容写完后，导出成Word文档给客户&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;同样的文档篇幅，Office软件需要编辑2个小时，通过这些工具链的协作，一般只需要半个小时就可以完成。&lt;/p&gt;

&lt;p&gt;因为给客户的文档都是非常规范的，只需要一次性设置好模板文件的样式，文档大纲和内容样式都可以通过工具自动生成，工具会帮合我们节省大量手动排版的时间，创作时只有关心内容即可，所以效率非常高。&lt;/p&gt;</content><author><name></name></author><summary type="html">作为Emacser，最享受在Emacs高效的处理文字，特别是在Emacs中编辑Markdown和Org文件，完全就是一种行云流水的感觉。 但是我们无法让所有的朋友和同事都使用Emacs，特别是有时候要发送公司文件给客户，客户一般都用Word。</summary></entry><entry><title type="html">Nox内建对微软Python Language Server的支持</title><link href="http://localhost:4000/emacs/nox/2020/03/30/nox-support-microsoft-server.html" rel="alternate" type="text/html" title="Nox内建对微软Python Language Server的支持" /><published>2020-03-30T00:00:00+08:00</published><updated>2020-03-30T00:00:00+08:00</updated><id>http://localhost:4000/emacs/nox/2020/03/30/nox-support-microsoft-server</id><content type="html" xml:base="http://localhost:4000/emacs/nox/2020/03/30/nox-support-microsoft-server.html">&lt;p&gt;微软的VSCode之所以好用，除了LSP协议的标准化外，微软自家的语言服务器在质量和性能也比社区实现的语言服务器要好得多。&lt;/p&gt;

&lt;p&gt;今天通过&lt;a href=&quot;https://github.com/manateelazycat/nox/commit/02708ca6db62993b6611d662348af5f91b369234&quot;&gt;这个补丁&lt;/a&gt;实现了 intelephense 对PHP语法补全的支持，而intelephense正是VSCode内置的PHP语言服务器。&lt;/p&gt;

&lt;p&gt;在Python领域，开源社区的&lt;a href=&quot;https://github.com/palantir/python-language-server&quot;&gt;Python Language Server&lt;/a&gt;主要是基于jedi这个库来实现的，对于大型的Python计算库，比如补全numpy的时候就会卡一下。&lt;/p&gt;

&lt;p&gt;微软自己的Python Language Server – &lt;a href=&quot;https://github.com/microsoft/python-language-server&quot;&gt;mspyls&lt;/a&gt;主要是用C#实现的，性能上要比pyls好很多。&lt;/p&gt;

&lt;p&gt;今天晚上给Nox写了一个补丁&lt;a href=&quot;https://github.com/manateelazycat/nox/commit/7e2502ba2f7afe90de7f86b477247eb8858d19a5&quot;&gt;Use mspyls as default Python Language Server&lt;/a&gt;，实现内建对mspyls的支持。&lt;/p&gt;

&lt;h4 id=&quot;体验mspyls&quot;&gt;体验mspyls&lt;/h4&gt;
&lt;ol&gt;
  &lt;li&gt;下载和安装&lt;a href=&quot;https://github.com/manateelazycat/nox&quot;&gt;Nox&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;执行 &lt;code class=&quot;highlighter-rouge&quot;&gt;nox-print-mspyls-download-url&lt;/code&gt; 命令，打印当前操作系统安装包的下载地址&lt;/li&gt;
  &lt;li&gt;下载并解压文件到 ~/.emacs.d/nox/mspyls 目录下，保证目录的根位置有 Microsoft.Python.LanguageServer 这个文件&lt;/li&gt;
  &lt;li&gt;给mspyls索引权限: &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo chmod +x -R  ~/.emacs.d/nox/mspyls&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;直接打开 python 文件，即可快速进行语法补全&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;注意&quot;&gt;注意&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;mspyls在语法补全之前会索引项目的文件，请不要直接在 HOME 目录下创建单文件进行语法补全测试，如果你的 HOME 目录文件很多，索引甚至会持续10多分钟&lt;/li&gt;
  &lt;li&gt;测试建议在HOME下建立一个test的空文件夹，然后再在test文件夹里面创建单文件来测试&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;mspyls-和-pyls-的优缺点&quot;&gt;mspyls 和 pyls 的优缺点&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;pyls: 基于jedi实现的，不建索引，大型Python库的语法补全比较慢&lt;/li&gt;
  &lt;li&gt;mspyls: 用C# 实现的，补全速度快，但是在巨型目录下，首次索引比较慢&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Nox默认使用mspyls作为Python的默认语言服务器，如果要切换回开源社区的 pyls ，直接修改默认服务器的设置即可：&lt;/p&gt;

&lt;div class=&quot;language-elisp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;nox-python-server&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;“&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;pyls&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;”&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;感谢&quot;&gt;感谢&lt;/h4&gt;
&lt;p&gt;感谢Emacs-China和Github社区朋友的帮助，让我这个老年人可以早点睡觉, 特别是 &lt;a href=&quot;https://github.com/theFool32&quot;&gt;theFool32&lt;/a&gt;和&lt;a href=&quot;https://github.com/seagle0128&quot;&gt;seagle0128&lt;/a&gt;的支持，在我解题解到山穷水尽时，给我柳暗花明的灵感和帮助。;)&lt;/p&gt;</content><author><name></name></author><summary type="html">微软的VSCode之所以好用，除了LSP协议的标准化外，微软自家的语言服务器在质量和性能也比社区实现的语言服务器要好得多。</summary></entry><entry><title type="html">Nox - 轻量级LSP客户端</title><link href="http://localhost:4000/emacs/nox/2020/03/29/nox.html" rel="alternate" type="text/html" title="Nox - 轻量级LSP客户端" /><published>2020-03-29T00:00:00+08:00</published><updated>2020-03-29T00:00:00+08:00</updated><id>http://localhost:4000/emacs/nox/2020/03/29/nox</id><content type="html" xml:base="http://localhost:4000/emacs/nox/2020/03/29/nox.html">&lt;h3 id=&quot;lsp&quot;&gt;LSP&lt;/h3&gt;
&lt;p&gt;Emacs，因其丰富的插件生态和高度一致的协同环境，不论敲代码还是写文章都有行云流水的感觉。
一直以来Emacs的短板都在智能语法补全上，不能像VSCode那样非常智能的补全代码。&lt;/p&gt;

&lt;p&gt;随着VSCode的流行和微软在开源社区的发力，LSP（编程语言服务器协议）逐渐发展成为代码智能补全领域的佼佼者。
通过标准的LSP协议，只用为编辑器或IDE开发一款LSP客户端，即可对所有的编
程语言提供智能补全支持，以解决原来众多编辑器（N）和补全后端（M）相互组
合产生的 M x N 问题，避免了大家反复造轮子，可以集中社区更多的资源在语
言服务器后端的开发和优化上。&lt;/p&gt;

&lt;h3 id=&quot;协议研究&quot;&gt;协议研究&lt;/h3&gt;
&lt;p&gt;Emacs目前也有两个LSP客户端: &lt;a href=&quot;https://github.com/emacs-lsp/lsp-mode&quot;&gt;lsp-mode&lt;/a&gt; 和 &lt;a href=&quot;https://github.com/joaotavora/eglot&quot;&gt;eglot&lt;/a&gt;, 但是这两个客户端的性能却不是很好，特别是lsp-mode, 写一会代码就会卡一下，非常影响编程思路。&lt;/p&gt;

&lt;p&gt;周末完整的研读了LSP的&lt;a href=&quot;https://microsoft.github.io/language-server-protocol/specifications/specification-current/&quot;&gt;协议规范细节&lt;/a&gt;, 并调研了Rust, Golang和Python的JSONRPC库用法，最后决定用Python来实现一个新的LSP代理客户端，因为Python有完整的多线程支持，所以不会出现预想的LSP数据流堵塞Emacs输入的问题。&lt;/p&gt;

&lt;p&gt;经过昨天一天的研究和调试，发现其实LSP Server在代码补全时返回的数据并不
大，为什么lsp-mode和eglot还会卡住Emacs呢？难道不是之前猜想的Elisp解析JSON慢的问题？&lt;/p&gt;

&lt;p&gt;为了弄明白性能瓶颈，随即裁剪了Eglot进行对比测试，主要针对代码补全以外的功能进行裁剪&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;用posframe替代eldoc来显示文档，避免每次输入一个单词就从服务器请求一次文档&lt;/li&gt;
  &lt;li&gt;去掉了所有LSP Server返回的代码诊断消息和处理函数，并从Eglot中移除
flymake相关的代码&lt;/li&gt;
  &lt;li&gt;默认只补全符号，并禁止补全代码模板，因为yasnippet的参数选中状态很容易消
失，一旦模板代码写错了，要修改调整反而效率更低&lt;/li&gt;
  &lt;li&gt;去掉 documentHighlight 协议，没啥用，反而经常通过overlay污染代码空间&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;通过上面的裁剪过后，Eglot居然异常流畅，真是喜出望外啊。&lt;/p&gt;

&lt;h3 id=&quot;nox&quot;&gt;Nox&lt;/h3&gt;
&lt;p&gt;在Eglot的代码基础之上，今天发布了新的Emacs LSP客户端 – &lt;a href=&quot;https://github.com/manateelazycat/nox&quot;&gt;Nox&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;目前Nox已经支持以下编程语言：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Javascript: &lt;a href=&quot;https://github.com/sourcegraph/javascript-typescript-langserver&quot;&gt;javascript-typescript-stdio&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Rust: &lt;a href=&quot;https://github.com/rust-lang-nursery/rls&quot;&gt;rls&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Python: &lt;a href=&quot;https://github.com/palantir/python-language-server&quot;&gt;pyls&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Ruby: &lt;a href=&quot;https://github.com/castwide/solargraph&quot;&gt;solargraph&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Java: &lt;a href=&quot;https://github.com/eclipse/eclipse.jdt.ls&quot;&gt;Eclipse JDT Language Server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Bash: &lt;a href=&quot;https://github.com/mads-hartmann/bash-language-server&quot;&gt;bash-language-server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;PHP: &lt;a href=&quot;https://github.com/felixfbecker/php-language-server&quot;&gt;php-language-server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;C/C++: &lt;a href=&quot;https://github.com/MaskRay/ccls&quot;&gt;ccls&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Haskell: &lt;a href=&quot;https://github.com/haskell/haskell-ide-engine&quot;&gt;IDE engine&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Elm: &lt;a href=&quot;https://github.com/elm-tooling/elm-language-server&quot;&gt;elm-language-server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Kotlin: &lt;a href=&quot;https://github.com/fwcd/KotlinLanguageServer&quot;&gt;kotlin-language-server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Go: &lt;a href=&quot;https://github.com/golang/go/wiki/gopls&quot;&gt;gopls&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Ocaml: &lt;a href=&quot;https://github.com/freebroccolo/ocaml-language-server&quot;&gt;ocaml-language-server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;R: &lt;a href=&quot;https://cran.r-project.org/package=languageserver&quot;&gt;languageserver&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Dart: &lt;a href=&quot;https://github.com/natebosch/dart_language_server&quot;&gt;dart_language_server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Elixir: &lt;a href=&quot;https://github.com/JakeBecker/elixir-ls&quot;&gt;elixir-ls&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Ada: &lt;a href=&quot;https://github.com/AdaCore/ada_language_server&quot;&gt;ada_language_server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Scala: &lt;a href=&quot;http://scalameta.org/metals/&quot;&gt;metals&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;TeX/LaTeX: &lt;a href=&quot;https://github.com/astoff/digestif&quot;&gt;Digestif&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Dockerfile: &lt;a href=&quot;https://github.com/rcjsuen/dockerfile-language-server-nodejs&quot;&gt;dockerfile_language_server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;HTML &lt;a href=&quot;https://github.com/Microsoft/vscode/tree/master/extensions/html-language-features/server&quot;&gt;html_language_server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;CSS: &lt;a href=&quot;https://github.com/Microsoft/vscode/tree/master/extensions/css-language-features/server&quot;&gt;css_language_server&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;JSON: &lt;a href=&quot;https://www.npmjs.com/package/vscode-json-languageserver&quot;&gt;json_language_server&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/pics/nox/nox.png&quot; alt=&quot;Nox&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Nox的项目目标主要有三个：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;功能上：只提供代码补全、代码定义跳转、代码引用和重命名功能这四个最核心的功能&lt;/li&gt;
  &lt;li&gt;设计上：保持界面交互简洁无打扰, 不会像 lsp-ui 提供花里胡哨的功能，减少对用户专注力的干扰&lt;/li&gt;
  &lt;li&gt;性能上：裁剪无用功能, 优化代码效率，保证代码补全时的流畅手感&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;在我看来，像语法检测和代码模板，flycheck以及yasnippet这些插件的资源占
用率更低，也更为专业。&lt;/p&gt;

&lt;p&gt;如果你追求LSP所有功能，lsp-mode和Eglot是更好的选择，如果你追求极致的编
码流畅度，Nox肯定是目前用户体验和性能最好的LSP客户端。&lt;/p&gt;

&lt;h3 id=&quot;安装&quot;&gt;安装&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;先安装依赖组件 &lt;a href=&quot;https://github.com/company-mode/company-mode&quot;&gt;company-mode&lt;/a&gt;和&lt;a href=&quot;https://github.com/tumashu/posframe&quot;&gt;posframe&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;拷贝&lt;a href=&quot;https://github.com/manateelazycat/nox&quot;&gt;Nox&lt;/a&gt;代码到Emacs的 load-path 路径&lt;/li&gt;
  &lt;li&gt;把下面的配置加到 ~/.emacs 中&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-elisp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'nox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dolist&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;hook&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;
               &lt;span class=&quot;ss&quot;&gt;'js-mode-hook&lt;/span&gt;
               &lt;span class=&quot;ss&quot;&gt;'rust-mode-hook&lt;/span&gt;
               &lt;span class=&quot;ss&quot;&gt;'python-mode-hook&lt;/span&gt;
               &lt;span class=&quot;ss&quot;&gt;'ruby-mode-hook&lt;/span&gt;
               &lt;span class=&quot;ss&quot;&gt;'java-mode-hook&lt;/span&gt;
               &lt;span class=&quot;ss&quot;&gt;'sh-mode-hook&lt;/span&gt;
               &lt;span class=&quot;ss&quot;&gt;'php-mode-hook&lt;/span&gt;
               &lt;span class=&quot;ss&quot;&gt;'c-mode-common-hook&lt;/span&gt;
               &lt;span class=&quot;ss&quot;&gt;'c-mode-hook&lt;/span&gt;
               &lt;span class=&quot;ss&quot;&gt;'c++-mode-hook&lt;/span&gt;
               &lt;span class=&quot;ss&quot;&gt;'haskell-mode-hook&lt;/span&gt;
               &lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;add-hook&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;hook&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;nox-ensure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;安装配置好以后，打开源码文件，即可享受流畅的智能补全体验。&lt;/p&gt;

&lt;h3 id=&quot;常用命令&quot;&gt;常用命令&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;命令&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;解释&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;nox&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;启动Nox客户端&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;nox-reconnect&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;重新链接LSP服务器&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;nox-shutdown&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;终止LSP服务器&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;nox-show-doc&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;显示光标处符号的文档&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;nox-rename&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;项目范围内批量重命名&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;nox-format&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;格式化当前文件或选中区域&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;xref-find-definitions&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;查找光标处符号定义&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;xref-find-definitions-other-window&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;在其他窗口中查找光标处符号定义&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;xref-pop-marker-stack&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;返回定义跳转前的位置&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;xref-find-references&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;查找光标处符号的所有引用&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;nox-event-buffer&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;切换到LSP消息文件，查看LSP协议消息&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;nox-stderr-buffer&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;切换到子进程管道文件，查看通讯细节和排错信息&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;更多命令和设置选项可以查看&lt;a href=&quot;https://github.com/manateelazycat/nox&quot;&gt;Nox&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;Enjoy! ;)&lt;/p&gt;</content><author><name></name></author><summary type="html">LSP Emacs，因其丰富的插件生态和高度一致的协同环境，不论敲代码还是写文章都有行云流水的感觉。 一直以来Emacs的短板都在智能语法补全上，不能像VSCode那样非常智能的补全代码。</summary></entry><entry><title type="html">Emacs Trick – 颜色重定向</title><link href="http://localhost:4000/emacs/2020/03/28/color-remap.html" rel="alternate" type="text/html" title="Emacs Trick -- 颜色重定向" /><published>2020-03-28T00:00:00+08:00</published><updated>2020-03-28T00:00:00+08:00</updated><id>http://localhost:4000/emacs/2020/03/28/color-remap</id><content type="html" xml:base="http://localhost:4000/emacs/2020/03/28/color-remap.html">&lt;p&gt;&lt;a href=&quot;https://github.com/manateelazycat/snails&quot;&gt;Snails&lt;/a&gt; 的输入框是无背景设计，整体设计感更好一点。&lt;/p&gt;

&lt;p&gt;但是用户如果设置了 &lt;code class=&quot;highlighter-rouge&quot;&gt;hl-line&lt;/code&gt; 这个Face，会导致snails的输入框是有两种背景颜色，非常丑。&lt;/p&gt;

&lt;p&gt;最开始准备使用临时变量，在进入 snails 的时候保存一下 &lt;code class=&quot;highlighter-rouge&quot;&gt;hl-line&lt;/code&gt; 背景颜色，进入 snails 取消 &lt;code class=&quot;highlighter-rouge&quot;&gt;hl-line&lt;/code&gt; 背景， snails 消失的时候重新恢复 &lt;code class=&quot;highlighter-rouge&quot;&gt;hl-line&lt;/code&gt; 背景。&lt;/p&gt;

&lt;p&gt;想了想，这样做太脆弱了，一旦出问题还会导致用户的 &lt;code class=&quot;highlighter-rouge&quot;&gt;hl-line&lt;/code&gt; 样式损坏。&lt;/p&gt;

&lt;p&gt;Google了一下Emacs关于 local face 的文章，发现可以像下面这种方式来临时设置某一个 face 的样式。&lt;/p&gt;

&lt;div class=&quot;language-elisp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;face-remap-add-relative&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'hl-line&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:background&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;face-background&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'snails-input-buffer-face&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;上面代码的意思是，把 &lt;code class=&quot;highlighter-rouge&quot;&gt;hl-line&lt;/code&gt; 的 background 属性重定向到 &lt;code class=&quot;highlighter-rouge&quot;&gt;snails-input-buffer-face&lt;/code&gt; 背景色，这样既可以保证snails输入框的无背景设计，实现又非常健壮，不会因为意外对用户的主题产生副作用。&lt;/p&gt;

&lt;p&gt;Emacs还是博大精深啊，学了这么多年，还有很多东西都不懂。&lt;/p&gt;</content><author><name></name></author><summary type="html">Snails 的输入框是无背景设计，整体设计感更好一点。</summary></entry><entry><title type="html">折腾emacs-rime</title><link href="http://localhost:4000/emacs/2020/03/22/emacs-rime.html" rel="alternate" type="text/html" title="折腾emacs-rime" /><published>2020-03-22T00:00:00+08:00</published><updated>2020-03-22T00:00:00+08:00</updated><id>http://localhost:4000/emacs/2020/03/22/emacs-rime</id><content type="html" xml:base="http://localhost:4000/emacs/2020/03/22/emacs-rime.html">&lt;p&gt;半年前在&lt;a href=&quot;https://manateelazycat.github.io/emacs/2019/09/12/make-rime-works-with-linux.html&quot;&gt;在Linux版的Emacs中使用RIME输入法&lt;/a&gt;这篇文章中详细讲述了怎么在Emacs使用RIME输入法。&lt;/p&gt;

&lt;p&gt;今天讲的仍然是在Emacs配置RIME输入法，只不过主角从&lt;a href=&quot;https://github.com/tumashu/pyim&quot;&gt;pyim&lt;/a&gt;换成了&lt;a href=&quot;https://github.com/DogLooksGood/emacs-rime&quot;&gt;emacs-rime&lt;/a&gt;。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;pyim是一个强大的Emacs输入法，不但整套输入法，还支持RIME作为输入法后端输入&lt;/li&gt;
  &lt;li&gt;emacs-rime是RIME输入法的Emacs UI前端，所有行为都通过RIME配置文件来配置&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;安装rime输入法&quot;&gt;安装RIME输入法&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;pacman &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt; fcitx-rime
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;配置rime输入法&quot;&gt;配置RIME输入法&lt;/h3&gt;

&lt;h4 id=&quot;默认使用简体&quot;&gt;默认使用简体&lt;/h4&gt;

&lt;p&gt;创建配置文件 ~/.config/fcitx/rime/luna_pinyin.custom.yaml，内容填上：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# luna_pinyin.custom.yaml&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;switches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;                   &lt;span class=&quot;c1&quot;&gt;# 注意缩进&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ascii_mode&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;reset&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;                &lt;span class=&quot;c1&quot;&gt;# reset 0 的作用是当从其他输入法切换到本输入法重设为指定状态&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;states&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;中文&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;西文&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# 选择输入方案后通常需要立即输入中文，故重设 ascii_mode = 0&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;full_shape&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;states&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;半角&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;全角&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# 而全／半角则可沿用之前方案的用法。&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;simplification&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;reset&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;                &lt;span class=&quot;c1&quot;&gt;# 增加这一行：默认启用「繁→簡」转换。&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;states&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;漢字&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;汉字&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;修改默认后选词数量&quot;&gt;修改默认后选词数量&lt;/h4&gt;

&lt;p&gt;创建配置文件 ~/.config/fcitx/rime/default.custom.yaml，内容填上：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;menu/page_size&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;9&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;配置模糊音&quot;&gt;配置模糊音&lt;/h4&gt;

&lt;p&gt;像我这种拼音发音不标准的人，可以在 ~/.config/fcitx/rime/default.custom.yaml 配置文件中继续追加下面配置&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;s1&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;speller/algebra'&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;erase/^xx$/&lt;/span&gt;                      &lt;span class=&quot;c1&quot;&gt;# 第一行保留&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# 模糊音定義&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;derive/^([zcs])h/$1/&lt;/span&gt;             &lt;span class=&quot;c1&quot;&gt;# zh, ch, sh =&amp;gt; z, c, s&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;derive/^([zcs])([^h])/$1h$2/&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;# z, c, s =&amp;gt; zh, ch, sh&lt;/span&gt;

    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;derive/^n/l/&lt;/span&gt;                     &lt;span class=&quot;c1&quot;&gt;# n =&amp;gt; l&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;derive/^l/n/&lt;/span&gt;                     &lt;span class=&quot;c1&quot;&gt;# l =&amp;gt; n&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# 這兩組一般是單向的&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#- derive/^r/l/                     # r =&amp;gt; l&lt;/span&gt;

    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;derive/^ren/yin/&lt;/span&gt;                 &lt;span class=&quot;c1&quot;&gt;# ren =&amp;gt; yin, reng =&amp;gt; ying&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#- derive/^r/y/                     # r =&amp;gt; y&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# 下面 hu &amp;lt;=&amp;gt; f 這組寫法複雜一些，分情況討論&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#- derive/^hu$/fu/                  # hu =&amp;gt; fu&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#- derive/^hong$/feng/              # hong =&amp;gt; feng&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#- derive/^hu([in])$/fe$1/          # hui =&amp;gt; fei, hun =&amp;gt; fen&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#- derive/^hu([ao])/f$1/            # hua =&amp;gt; fa, ...&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;#- derive/^fu$/hu/                  # fu =&amp;gt; hu&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#- derive/^feng$/hong/              # feng =&amp;gt; hong&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#- derive/^fe([in])$/hu$1/          # fei =&amp;gt; hui, fen =&amp;gt; hun&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#- derive/^f([ao])/hu$1/            # fa =&amp;gt; hua, ...&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# 模糊音定義先於簡拼定義，方可令簡拼支持以上模糊音&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;abbrev/^([a-z]).+$/$1/&lt;/span&gt;           &lt;span class=&quot;c1&quot;&gt;# 簡拼（首字母）&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;abbrev/^([zcs]h).+$/$1/&lt;/span&gt;          &lt;span class=&quot;c1&quot;&gt;# 簡拼（zh, ch, sh）&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# 自動糾正一些常見的按鍵錯誤&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;derive/([aeiou])ng$/$1gn/&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;# dagn =&amp;gt; dang&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;derive/([dtngkhrzcs])o(u|ng)$/$1o/&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# zho =&amp;gt; zhong|zhou&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;derive/ong$/on/&lt;/span&gt;                  &lt;span class=&quot;c1&quot;&gt;# zhonguo =&amp;gt; zhong guo&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;derive/ao$/oa/&lt;/span&gt;                   &lt;span class=&quot;c1&quot;&gt;# hoa =&amp;gt; hao&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;derive/([iu])a(o|ng?)$/a$1$2/&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# tain =&amp;gt; tian&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;添加搜狗词库&quot;&gt;添加搜狗词库&lt;/h4&gt;

&lt;p&gt;网上搜索文件 luna_pinyin.sogou.dict.yaml，放到目录 ~/.config/fcitx/rime 下
然后在 ~/.config/fcitx/rime/default.custom.yaml 文件中添加下面配置：&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;translator/dictionary&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;luna_pinyin.sogou&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;重新部署即可体验词库。&lt;/p&gt;

&lt;h3 id=&quot;安装依赖&quot;&gt;安装依赖&lt;/h3&gt;

&lt;p&gt;因为&lt;a href=&quot;https://github.com/tumashu/posframe&quot;&gt;posframe&lt;/a&gt;可以让后选词显示在光标处，所以建议安装&lt;/p&gt;

&lt;h3 id=&quot;安装emacs-rime&quot;&gt;安装emacs-rime&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/DogLooksGood/emacs-rime
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;把 emacs-rime 目录放到 &lt;code class=&quot;highlighter-rouge&quot;&gt;load-path&lt;/code&gt; 下，增加下面配置:&lt;/p&gt;

&lt;div class=&quot;language-elisp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'rime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;;;; Code:&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;rime-user-data-dir&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;~/.config/fcitx/rime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;rime-posframe-properties&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:background-color&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;#333333&quot;&lt;/span&gt;
            &lt;span class=&quot;ss&quot;&gt;:foreground-color&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;#dcdccc&quot;&lt;/span&gt;
            &lt;span class=&quot;ss&quot;&gt;:font&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;WenQuanYi Micro Hei Mono-14&quot;&lt;/span&gt;
            &lt;span class=&quot;ss&quot;&gt;:internal-border-width&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;setq&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;default-input-method&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;rime&quot;&lt;/span&gt;
      &lt;span class=&quot;nv&quot;&gt;rime-show-candidate&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;'posframe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;上面的配置分别设置emacs-rime读取RIME配置的路径、UI细节和使用posframe来显示候选词。&lt;/p&gt;

&lt;h3 id=&quot;emacs-rime的优点&quot;&gt;emacs-rime的优点&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;安装相对pyim+rime要简单不少，基本就是下载拷贝就可以了，动态库编译和加载自动解决。&lt;/li&gt;
  &lt;li&gt;只是RIME的前端，代码量比较小，有问题还可以提交个补丁；&lt;/li&gt;
  &lt;li&gt;中英文混合输入的体验很好，英文输入完成后，按回车或者空格就可以继续输入中文；&lt;/li&gt;
  &lt;li&gt;UI默认配色不错，看着很现代；&lt;/li&gt;
&lt;/ol&gt;</content><author><name></name></author><summary type="html">半年前在在Linux版的Emacs中使用RIME输入法这篇文章中详细讲述了怎么在Emacs使用RIME输入法。</summary></entry></feed>